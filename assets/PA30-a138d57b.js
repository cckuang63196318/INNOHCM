import{_ as z,F as Q,G as J,H as n,P as g,J as Z,L as i,Q as ee,K as D,R as te,U as le,o as E,v as ae,a as I,u as o,c as T,M as R,V as re,w as ue,T as oe,O as de}from"./index-1085d63c.js";import{u as se,_ as ie,d as ne,e as ce,t as q}from"./editForm01-acf08ba5.js";import"./DataTable-28741cc6.js";const ve={PA0000_PERNR:{value:"",type:"text",required:!0,disableds:{view:!1,add:!0,copy:!0,edit:!0},col:2,blockEnd:!0},PA0000_INFTY:{value:"",type:"select",required:!0,disableds:{view:!1,add:!0,copy:!0,edit:!0},options:[],col:2,blockEnd:!0},PA0000_BEGDA:{value:new Date().toISOString().substring(0,10),type:"date",disableds:{view:!1,add:!0,copy:!0,edit:!0},required:!0,col:2,blockEnd:!0,attribute:{}},PA0000_ENDDA:{value:"9999-12-31",type:"date",disableds:{view:!1,add:!0,copy:!0,edit:!0},required:!0,col:2,blockEnd:!0,attribute:{}},PA0001_PERSG:{value:null,type:"text",required:!1,disableds:{view:!0,add:!0,copy:!0,edit:!0},col:2,blockEnd:!1,comment:"台灣正式員工"},PA0001_PERSK:{value:null,type:"text",required:!1,disableds:{view:!0,add:!0,copy:!0,edit:!0},col:2,blockEnd:!0,comment:"非派外IDL"},PA0001_PERSA:{value:null,type:"text",required:!1,disableds:{view:!0,add:!0,copy:!0,edit:!0},col:2,blockEnd:!1,comment:"南科"},PAPRG_KEEP:{value:null,type:"text",required:!1,disableds:{view:!0,add:!0,copy:!0,edit:!0},col:2,blockEnd:!0,comment:"玻璃與表面技術開發部"}},fe={mainForm:{form:ve}},Ae={PA0000_ID:{value:"",type:"null",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:4,blockEnd:!0},PA0000_BEGDA:{value:"",type:"date",disableds:{add:!1,edit:!1,view:!0,copy:!1},required:!0,col:1,blockEnd:!0,attribute:{min:"1970-01-01",max:"9999-12-31"}},PA0000_ENDDA:{value:"",type:"date",disableds:{add:!1,edit:!1,view:!0,copy:!1},required:!0,col:1,blockEnd:!0,attribute:{min:"1970-01-01",max:"9999-12-31"}},PA0000_AEDTM:{value:"",type:"date",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0,attribute:{}},PA0000_UNAME:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0},divider_PA0000_UNAME:{value:"人事活動",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},T529A_MNTXT:{value:null,type:"select",required:!0,disableds:{add:!1,edit:!0,view:!0,copy:!0},options:[{value:"SEL1",label:"部門異動一"},{value:"SEL2",label:"部門異動二"}],col:2,blockEnd:!0},span_T529A_MNTXT:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},PA0000_MASSG:{value:"",type:"text",disableds:{add:!1,edit:!1,view:!0,copy:!1},required:!0,col:3,blockEnd:!0,comment:"公司指派"},span_PA0000_MASSG:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0},divider_PA0000_MASSG:{value:"狀態",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},PA0000_STAT2:{value:null,type:"select",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,options:[{value:"SEL1",label:"在職中一"},{value:"SEL2",label:"在職中二"}]},span_PA0000_STAT2:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:2,blockEnd:!0},divider_PA0000_STAT2:{value:"組織指派",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},PA0001_PLANS:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},span_PA0001_PLANS:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},PA0001_PERSA:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,comment:"南京"},span_PA0001_PERSA:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:2,blockEnd:!0},PA0001_PERSG:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,comment:"海外派遣員工"},span_PA0001_PERSG:{type:"span",value:"end",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0},PA0001_PERSK:{value:"",type:"text",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0,comment:"非派外DL"},span_PA0001_PERSK:{type:"span",value:"end",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0},divider_PA0001_PERSK:{value:"其他作業",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0}},M={dataTable:{key:"PA0000_ID",value:[],columns:[{key:"PA0000_BEGDA"},{key:"PA0000_ENDDA"},{key:"PA0000_MASSN"},{key:"T529A_MNTXT"},{key:"PA0000_MASSG"},{key:"T530_MGTXT"},{key:"PA0000_STAT2"}]},editForm:{form:Ae,functions:{formStart:pe,formSelect:ye,formUpdate:be,formEnd:Pe,buttonClick:me}}};async function pe(){console.log("PA0000 formStart")}async function ye(d){console.log("PA0000 formSelect:",d)}async function be(d,A){console.log("PA0000 formUpdate:",d,A),M.editForm.form.PA0000_BEGDA.value="2010-01-02"}async function me(d){console.log("PA0000 buttonClick:",d)}async function Pe(){console.log("PA0000 formEnd")}const Ee={PA0000_ID:{value:"",type:"null",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:4,blockEnd:!0},PA0000_BEGDA:{value:"",type:"date",disableds:{add:!1,edit:!1,view:!0,copy:!1},required:!0,col:1,blockEnd:!0,attribute:{min:"1970-01-01",max:"9999-12-31"}},PA0000_AEDTM:{value:"",type:"date",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0,attribute:{}},PA0000_UNAME:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0},divider_PA0000_UNAME:{value:"人事活動",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},T529A_MNTXT:{value:null,type:"select",required:!0,disableds:{add:!1,edit:!0,view:!0,copy:!0},options:[{value:"SEL1",label:"部門異動一"},{value:"SEL2",label:"部門異動二"}],col:2,blockEnd:!0},span_T529A_MNTXT:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},PA0000_MASSG:{value:"",type:"text",disableds:{add:!1,edit:!1,view:!0,copy:!1},required:!0,col:3,blockEnd:!0,comment:"公司指派"},span_PA0000_MASSG:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:1,blockEnd:!0},divider_PA0000_MASSG:{value:"狀態",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},PA0000_STAT2:{value:null,type:"select",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,options:[{value:"SEL1",label:"在職中一"},{value:"SEL2",label:"在職中二"}]},span_PA0000_STAT2:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:2,blockEnd:!0},divider_PA0000_STAT2:{value:"組織指派",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0},PA0001_PLANS:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},span_PA0001_PLANS:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0},PA0001_PERSA:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,comment:"南京"},span_PA0001_PERSA:{type:"span",value:"end",disableds:{add:!0,edit:!0,view:!0,copy:!0},col:2,blockEnd:!0},PA0001_PERSG:{value:"",type:"text",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:2,blockEnd:!0,comment:"海外派遣員工"},span_PA0001_PERSG:{type:"span",value:"end",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0},PA0001_PERSK:{value:"",type:"text",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0,comment:"非派外DL"},span_PA0001_PERSK:{type:"span",value:"end",disableds:{view:!0,add:!0,copy:!0,edit:!0},required:!1,col:2,blockEnd:!0},divider_PA0001_PERSK:{value:"其他作業",type:"divider",disableds:{add:!0,edit:!0,view:!0,copy:!0},required:!1,col:4,blockEnd:!0}},_e={dataTable:{key:"PA0000_ID",value:[],columns:[{key:"PA0000_BEGDA"},{key:"PA0000_MASSN"},{key:"T529A_MNTXT"},{key:"PA0000_MASSG"},{key:"T530_MGTXT"},{key:"PA0000_STAT2"}]},editForm:{form:Ee,functions:{formStart:ke,formSelect:Te,formUpdate:Se,formEnd:Ne,buttonClick:we}}};function ke(){console.log("PA0000 formStart")}function Te(d){console.log("PA0000 formSelect:",d)}function Se(d,A){console.log("PA0000 formUpdate:",d,A)}function we(d){console.log("PA0000 buttonClick:",d)}function Ne(){console.log("PA0000 formEnd")}const h=15,Fe={__name:"PA30",setup(d){const{t:A}=Q(),S=J();se();const p={PA0000:M,PA0001:_e},w=n({value:[]}),r={INFTY:"",PERNR:"",BEGDA:"",ENDDA:""};var m=!1;const _=n({value:"view"}),P=n({value:""}),B=n({value:{value:!1},setLockObject:x}),G={search:{},add:{},copy:{},edit:{},delete:{},save:{},cancel:{}},u=n(fe.mainForm.form),N=g("PA0000_DataTable_Initial");var s=n({value:[],columns:[{key:"PAPRG_INFTYDATA",sorter:!1}]});const F=g("PA0000_EditForm_Initial"),k=n({value:!1}),c=n({value:!1}),b=n({value:"view"}),L={};var v={};Z(async()=>{if(u.PA0000_INFTY.value="",u.PA0000_PERNR.value="",m=!1,i.inftys.length===0)try{u.PA0000_INFTY.options.length=0,ee.forEach(t=>{t.name==="PA30"&&t.meta.inftyList.forEach(l=>{let a=`PAPRG.INFTYLIST.${l}`;i.inftys.push({value:l,label:`${l} - ${A(a)}`,level:"*"})})});let e=await D("/INNOHCM/FN/FNROLEPARAMATER/getData",{AD:i.ad,SUBSYSTEM:"PA"});console.log("onBeforeMount:",e),e.data.INFTYR.forEach(t=>{let l=!1;if(Object.values(i.inftys).forEach(a=>{if(a.value===t){a.level="R",l=!0;return}}),!l){let a=`PAPRG.INFTYLIST.${t}`;i.inftys.push({value:t,label:`${t} - ${A(a)}`,level:"R"})}}),e.data.INFTYW.forEach(t=>{let l=!1;if(Object.values(i.inftys).forEach(a=>{if(a.value===t){a.level="W",l=!0;return}}),!l){let a=`PAPRG.INFTYLIST.${t}`;i.inftys.push({value:t,label:`${t} - ${A(a)}`,level:"W"})}}),i.inftys.sort((t,l)=>t.value.localeCompare(l.value)),u.PA0000_INFTY.options=Object.values(i.inftys),console.log("usrStore.inftys:",i.inftys)}catch(e){let t=`Load Infotype Error: ${e.message}`;y(t)}else u.PA0000_INFTY.options=Object.values(i.inftys)}),te(()=>{r.INFTY=u.PA0000_INFTY.value,r.PERNR=u.PA0000_PERNR.value,r.BEGDA=u.PA0000_BEGDA.value,r.ENDDA=u.PA0000_ENDDA.value});async function Y(e,t){if(e==="PA0000_INFTY"){if(t===r.INFTY)return;r.INFTY=t}else if(e==="PA0000_PERNR")if(t===r.PERNR){console.log("mainFormUpdate:",e,"尚待優化");return}else r.PERNR=t;else if(e==="PA0000_BEGDA"){if(t===r.BEGDA)return;r.BEGDA=t}else if(e==="PA0000_ENDDA"){if(t===r.ENDDA)return;r.ENDDA=t}else return;m=!1,r.INFTY.length>0&&V(r.INFTY)}async function $(e,t){if(["add","copy","edit","delete"].indexOf(e)>-1)b.value=e;else if(e==="cancel"){let l={};console.log("editForm:",v,s.key),s.value.forEach(a=>{console.log("new item:",a,a[s.key],v[s.key]),a[s.key]===v[s.key].value&&(l=a)}),console.log("new form:",l),q(v,l),b.value="view"}else e==="save"&&(c.value=!1,P.value="lock",await p[r.INFTY].editForm.functions.buttonClick(e),console.log("editForm.functions.buttonClick 尚待優化"));if(e==="search"){if(u.PA0000_PERNR.value.length===0||u.PA0000_INFTY.value.length===0){y("PERNR or INFTY Can Not Empty");return}else if(u.PA0000_BEGDA.value>=u.PA0000_ENDDA.value){y("BEGDA Can Not >= ENDDA");return}c.value=!1,s.value.length=0;try{(await D("/INNOHCM/PA/PA0000/getData",{Action:e})).DATA.forEach(a=>{s.value.push(a)}),m=!0}catch(l){let a=`/INNOHCM/PA/PA0000/getData Error: ${l.message}`;S.error(a)}}}function x(){let e=r.INFTY,t=r.PERNR,l=null,a={mainItem:null,subItem:null,message:""};if(!m){let f=`Infotype [ ${e} - ${t} ] Has Not Selected & Query`;return y(f),a.message=f,a}if(i.inftys.forEach(f=>{f.value===e&&(l=f)}),l===null||l.level!=="W"){let f=`Infotype [ ${l.label} ] Has Not Write Authonization`;return y(f),a.message=f,a}return{mainItem:e,subItem:t}}function C(e){k.value=e,e?(_.value="edit",c.value&&(P.value="editSelect")):(_.value="view",b.value="view",c.value=!1)}function U(e,t){q(v,t),b.value="view",P.value="editSelect",c.value=!0}function O(e){console.log("dataTablePageClick",e,h)}async function K(){console.log("editFormStart",r.INFTY),await p[r.INFTY].editForm.functions.formStart()}async function X(e,t){console.log("editFormToolBarButtonClick",e,t)}async function j(e,t){console.log("editFormUpdate:",e,t),await p[r.INFTY].editForm.functions.formUpdate(e,t)}async function H(){console.log("editFormEnd"),await p[r.INFTY].editForm.functions.formEnd()}async function W(){console.log("editFormLeave"),c.value=!1}function V(e){try{v=n(p[e].editForm.form),p[e].editForm.form=v,F.value=`PA0000_EditForm_${e}`,c.value=!1,s=n(Object.assign({},p[e].dataTable)),s.value.length=0,w.value.length=0,N.value=`PA0000_DataTable_${e}`,console.log("dataTable:",s)}catch(t){let l=`Load Infotype [ ${e} ] Error : ${t.message}`;y(l)}}function y(e){le.bellList.unshift({message:e}),S.error(e),console.error(e)}return(e,t)=>(E(),ae(de,null,[I(ie,{action:o(_),"action-sequence":o(P),"switch-value":o(B),onSwitchUpdate:C,"buttons-value":G,onButtonClick:$,"form-value":o(u),onFormUpdate:Y},null,8,["action","action-sequence","switch-value","form-value"]),(E(),T(re,null,[o(c).value?R("",!0):(E(),T(ne,{key:o(N),value:o(s),"page-size":h,"edit-mode":o(k),"checked-row-keys":o(w),selection:!0,"display-add":!1,onButtonClick:U,onPageClick:O},null,8,["value","edit-mode","checked-row-keys"]))],1024)),I(oe,{name:"slide-fade"},{default:ue(()=>[o(c).value?(E(),T(ce,{key:o(F),action:o(b),"edit-mode":o(k),"buttons-value":L,onButtonClick:X,"form-value":o(v),onFormUpdate:j,onFormStart:K,onFormEnd:H,onFormLeave:W},null,8,["action","edit-mode","form-value"])):R("",!0)]),_:1})],64))}},Re=z(Fe,[["__scopeId","data-v-7b1c64c3"]]);export{Re as default};
